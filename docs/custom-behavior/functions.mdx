---
title: Функции
description: Функции, доступные для выполнения в фрагментах кода и действии "Выполнить код"
---

import MdnRef from '@site/src/components/MdnRef';

### `setValue(key, value)`: _void_ \{#setvalue}

Устанавливает данные на основе ключа. Если ключа не существует, то он будет создан, в ином случае перезапишет данные ключа.

| Параметр | Тип    | Обязательный | Описание |
| -------- | ------ | ------------ | -------- |
| key      | string | Да           | Ключ     |
| value    | any    | Да           | Значение |

```javascript
{{ setValue('data.balance', 500) }}
{{ setValue('data.name', 'Hello World!') }}
{{ setValue('data', { balance: 500, name: 'Hello World!' }) }}
```

### `getValue(key)`: _<MdnRef dataType="Promise" />\<any>_ \{#getvalue}

Возвращает данные на основе указанного ключа.

| Параметр | Тип    | Обязательный | Описание      |
| -------- | ------ | ------------ | ------------- |
| key      | string | Да           | Ключ значения |

```javascript
{{ setValue('data', { balance: 500, name: 'Hello World!' }) }}

{{ getValue('data.balance').then(value => { /* do something */ }) }}
{{ getValue('data.name').then(value => { /* do something */ }) }}
{{ getValue('data').then(value => { /* do something */ }) }}
```

### `deleteValue(key)`: _void_ \{#deletevalue}

Удаляет данные на основе указанного ключа.

| Параметр | Тип    | Обязательный | Описание      |
| -------- | ------ | ------------ | ------------- |
| key      | string | Да           | Ключ значения |

```javascript
{{ setValue('data', { balance: 500, name: 'Hello World!' }) }}

{{ deleteValue('data.balance') }}
{{ deleteValue('data') }}
```

### `createChannel(options)`: _Promise\<[Channel](data-types/channel.mdx)>_ \{#createchannel}

Создает новый канал на сервере.

| Параметр | Тип                                                         | Обязательный | Описание         |
| -------- | ----------------------------------------------------------- | ------------ | ---------------- |
| options  | [CreateChannelOptions](data-types/createchanneloptions.mdx) | Да           | Опции для канала |

:::info

Данная функция доступна только для действия "Выполнить код".

:::

### `createThread(channelId, options)`: _Promise\<[Thread](data-types/thread.mdx)>_ \{#createthread}

Создает новую ветку в канале.

| Параметр  | Тип                                                        | Обязательный | Описание                                            |
| --------- | ---------------------------------------------------------- | ------------ | --------------------------------------------------- |
| channelId | string                                                     | Да           | Идентификатор канала, в котором будет создана ветка |
| options   | [CreateThreadOptions](data-types/createchanneloptions.mdx) | Да           | Опции для ветки                                     |

:::info

Данная функция доступна только для действия "Выполнить код".

:::

### `deferReply(options)`: _<MdnRef dataType="Promise" />\<void>_ \{#deferreply}

Откладывает ответ на команду.

| Параметр | Тип                                                   | Обязательный | Описание         |
| -------- | ----------------------------------------------------- | ------------ | ---------------- |
| options  | [DeferReplyOptions](data-types/deferreplyoptions.mdx) | Нет          | Опции для ответа |

:::info

Данная функция доступна только для действия "Выполнить код".

:::

### `deferUpdate()`: _Promise\<void>_ \{#deferupdate}

Откладывает обновление сообщения, к которому был привязан компонент.

:::info

Данная функция доступна только для действия "Выполнить код".

:::

### `deleteChannel(channelId)`: _<MdnRef dataType="Promise" />\<void>_ \{#deletechannel}

Удаляет канал или ветку.

| Параметр  | Тип    | Обязательный | Описание                                    |
| --------- | ------ | ------------ | ------------------------------------------- |
| channelId | string | Да           | Идентификатор канала, который нужно удалить |

:::info

Данная функция доступна только для действия "Выполнить код".

:::

### `deleteMessage(channelId, messageId)`: _<MdnRef dataType="Promise" />\<void>_ \{#deletemessage}

Удаляет сообщение.

| Параметр  | Тип    | Обязательный | Описание                                            |
| --------- | ------ | ------------ | --------------------------------------------------- |
| channelId | string | Да           | Идентификатор канала, в который находится сообщение |
| messageId | string | Да           | Идентификатор сообщение, которое нужно удалить      |

:::info

Данная функция доступна только для действия "Выполнить код".

:::

### `deleteReply()`: _<MdnRef dataType="Promise" />\<void>_ \{#deletereply}

Удаляет ответ на команду.

:::info

Данная функция доступна только для действия "Выполнить код".

:::

### `editReply(options)`: _<MdnRef dataType="Promise" />\<void>_ \{#editreply}

Редактирует ответ на команду.

| Параметр | Тип                                             | Обязательный | Описание         |
| -------- | ----------------------------------------------- | ------------ | ---------------- |
| options  | [MessageOptions](data-types/messageoptions.mdx) | Да           | Опции для ответа |

:::info

Данная функция доступна только для действия "Выполнить код".

:::

### `followUpReply(options)`: _<MdnRef dataType="Promise" />\<void>_ \{#followupreply}

Отправляет последующий ответ на команду.

| Параметр | Тип                                         | Обязательный | Описание         |
| -------- | ------------------------------------------- | ------------ | ---------------- |
| options  | [ReplyOptions](data-types/replyoptions.mdx) | Да           | Опции для ответа |

:::info

Данная функция доступна только для действия "Выполнить код".

:::

### `getUserActivity(userId)`: _<MdnRef dataType="Promise" />\<[UserActivity](data-types/useractivity.mdx)>_ \{#getuseractivity}

Получает активность пользователя.

| Параметр | Тип    | Обязательный | Описание                   |
| -------- | ------ | ------------ | -------------------------- |
| userId   | string | Да           | Идентификатор пользователя |

:::info

Данная функция доступна только для действия "Выполнить код".

:::

### `reply(options)`: _<MdnRef dataType="Promise" />\<void>_ \{#reply}

Отправляет ответ на команду.

| Параметр | Тип                                         | Обязательный | Описание         |
| -------- | ------------------------------------------- | ------------ | ---------------- |
| options  | [ReplyOptions](data-types/replyoptions.mdx) | Да           | Опции для ответа |

:::info

Данная функция доступна только для действия "Выполнить код".

:::

### `showModal(options)`: _<MdnRef dataType="Promise" />\<void>_ \{#showmodal}

Отображает модальный компонент

| Параметр | Тип                                                 | Обязательный | Описание              |
| -------- | --------------------------------------------------- | ------------ | --------------------- |
| options  | [ShowModalOptions](data-types/showmodaloptions.mdx) | Да           | Опции модального окна |

:::info

Данная функция доступна только для действия "Выполнить код".

:::

### `modifyUserRoles(userId, roles, mode)`: _<MdnRef dataType="Promise" />\<void>_ \{#modifyuserroles}

Редактирует роли пользователя.

| Параметр | Тип              | Обязательный | Описание                                                                                     |
| -------- | ---------------- | ------------ | -------------------------------------------------------------------------------------------- |
| userId   | string           | Да           | Идентификатор пользователя, которому будут изменены роли                                     |
| roles    | array of strings | Да           | Роли, которые будут добавлены/убраны/установлены                                             |
| mode     | string           | Нет          | Режим функции. `add` - добавить, `remove` - убрать, `set` - установить. По умолчанию - `add` |

:::info

Данная функция доступна только для действия "Выполнить код".

:::

### `modifyUserWallet(userId, amount, currencyId)`: _<MdnRef dataType="Promise" />\<void>_ \{#modifyuserwallet}

Добавляет/отнимает валюту у пользователя.

| Параметр   | Тип    | Обязательный | Описание                                                                                |
| ---------- | ------ | ------------ | --------------------------------------------------------------------------------------- |
| userId     | string | Да           | Идентификатор пользователя, которому будет изменен кошелёк                              |
| amount     | number | Да           | Количество валюты, которое будет добавлено или убрано. Негативное число отнимает валюту |
| currencyId | string | Нет          | Идентификатор валюты. По умолчанию `DEFAULT`                                            |

:::info

Данная функция доступна только для действия "Выполнить код".

:::

### `sendMessage(channelId, options)`: _<MdnRef dataType="Promise" />\<[Message](data-types/message.mdx)>_ \{#sendmessage}

Отправляет сообщение в указанный канал.

| Параметр  | Тип                                             | Обязательный | Описание                                                   |
| --------- | ----------------------------------------------- | ------------ | ---------------------------------------------------------- |
| channelId | string                                          | Да           | Идентификатор канала, в который будет отправлено сообщение |
| options   | [MessageOptions](data-types/messageoptions.mdx) | Да           | Опции для сообщения                                        |

:::info

Данная функция доступна только для действия "Выполнить код".

:::

### `overwriteChannelPermissions(channelIds, permissions, userOrRole)`: _<MdnRef dataType="Promise" />\<void>_ \{#overwritechannelpermissions}

Переопределяет права выбранного канала для выбранного пользователя или роли.

| Параметр    | Тип                                                                                                             | Обязательный | Описание                                                      |
| ----------- | --------------------------------------------------------------------------------------------------------------- | ------------ | ------------------------------------------------------------- |
| channelIds  | array of string                                                                                                 | Да           | Идентификаторы каналов для которых будут переопределены права |
| permissions | [PermissionsFlags](https://discord.com/developers/docs/topics/permissions#permissions-bitwise-permission-flags) | Да           | Список прав, пример: `{VIEW_CHANNEL\: false}`                 |
| userOrRole  | string                                                                                                          | Да           | Идентификатор роли или пользователя                           |

:::info

Данная функция доступна только для действия "Выполнить код".

:::
