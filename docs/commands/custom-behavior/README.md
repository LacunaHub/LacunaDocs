---
title: Пользовательское поведение
description: Функция, позволяющая создавать собственные команды и автоматизации с помощью языка JavaScript
---

Пользовательские команды позволяют создавать собственные команды. Их функционал во многом зависит от фрагментов кода, которые используют чистый JavaScript. Если вы уже работали с каким-нибудь языком программирования или напрямую сталкивались с JS, то вам будет легче понять работу фрагментов кода.

- [Имена команд, опций, вариантов выбора](https://discord.com/developers/docs/interactions/application-commands#application-command-object-application-command-naming)

## Компоненты <a href="#components" id="components"></a>

В пользовательских командах существуют два типа компонентов: условие и действие.

Компонент условия выполняет инструкцию и возвращает значение `true` (истинно) или `false` (ложно). Если значение условия равняется `false`, то цепочка выполнения компонентов прервется.

Компонент действия может отправлять сообщения, выдавать роли и так далее. Со списком действий можно ознакомиться непосредственно при создании команды.

Все компоненты выполняются в том порядке, в котором вы их выставили. Для контроля расположения компонентов используются стрелочки ↑ и ↓.

### Ограничения

Существует ограничение на количество компонентов одного типа в одной пользовательской команде.

<table><thead><tr><th>Компонент</th><th>Тип</th><th data-type="number">Максимальное количество</th></tr></thead><tbody><tr><td>Проверка значений</td><td>Условие</td><td>5</td></tr><tr><td>Ответить</td><td>Действие</td><td>1</td></tr><tr><td>Отправить сообщение</td><td>Действие</td><td>2</td></tr><tr><td>Изменить роли</td><td>Действие</td><td>2</td></tr><tr><td>Перенаправить на команду</td><td>Действие</td><td>1</td></tr><tr><td>Изменить кошелёк</td><td>Действие</td><td>2</td></tr><tr><td>Выполнить код</td><td>Действие</td><td>1</td></tr><tr><td>Открыть модальное окно</td><td>Действие</td><td>1</td></tr><tr><td>Переопределить права канала</td><td>Действие</td><td>1</td></tr></tbody></table>

:::info

Действие "Выполнить код" не позволяет добавлять другие типы компонентов. При добавлении данного действия все остальные будут удалены. Также действие "Выполнить код" ограничено 4000 символов.

:::

## Фрагменты кода <a href="#code-snippets" id="code-snippets"></a>

Фрагменты кода располагаются внутри двойных фигурных скобок `{{ ... }}`. Они работают на чистом JavaScript и используют его синтаксис. После выполнения фрагмента кода, вместо него вставляется последнее значение, которое он вернул. Если фрагмент вернет `undefined`, то вместо него будет пустая строка. В случае ошибки будет отображено её сообщение.

```ada
{{ member.user.username }} только что использовал команду!
```

В примере выше фрагмент `{{ member.user.username }}` вернет имя пользователя, который использовал команду. Пробелы в начале и в конце фрагмента ставить необязательно, но рекомендуются для их более удобного чтения.

Фрагменты кода необязательно должны умещаться в одну строку, они могут быть многострочными:

```ada
{{
const name = member.user.username
const id = member.user.id
}}
Имя пользователя: {{ name }}
Идентификатор пользователя: {{ id }}
```

Мы объявили переменную `name` и `id` в многострочном фрагменте и использовали в фрагментах ниже.
